<app-home></app-home>
<div class="container initial-position">

    <!--Form-->
    <div class="row justify-content-center">
      <div class="col-6">
        <form [formGroup]="newRolForm" (ngSubmit)="onCreate()" class="create-form">
          <div class="form-group">
            <div class="row mt-1">
              <label class="col-md-3 offset-1 text-end mt-3">
                <b>Nombre *</b>
              </label>
              <input formControlName="nombrePermiso" type="text" class="form-control mt-3" maxlength="30"
                style="width: 275px;" [class.validfield]="this.newRolForm.get('nombrePermiso')?.valid"
                [class.invalidfield]="this.newRolForm.get('nombrePermiso')?.invalid && this.newRolForm.get('nombrePermiso')?.touched"
                (focusout)="checkForm()">
              <small class="text-danger"
                *ngIf="this.newRolForm.get('nombrePermiso')?.touched && this.newRolForm.get('nombrePermiso')?.invalid">El
                campo es obligatorio</small>
            </div>
          </div>
          <button class="btn text-white mt-4 btn-sm" #CreatePermission disabled>
            Crear
          </button>
        </form>
      </div>
    </div>
  
    <!--Table-->
    <div class="row mt-4 justify-content-center">
      <div class="col-3">
        <h3>Roles Existentes</h3>
      </div>
    </div>
    <div class="row mt-4">
      <div class="col-2">
      </div>
      <div class="col-9">
        <div class="table-responsive">
          <table class="table text-center">
            <thead>
              <tr>
                <th scope="col">Nombre del permiso</th>
                <th scope="col">Acciones</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let rol of roles">
                  <td>{{rol.nombreRol}}</td>
                <td>
                  <button class="btn bg-secondary"
                    (click)="open(rol.id, rol.nombreRol, rol.permisos)">
                    <fa-icon [icon]="faEdit"></fa-icon> Editar
                  </button>
                  <button class="btn bg-danger" [swal]="{
                      title: 'Cuidado',
                      icon: 'question',
                      text: 'Esta acción es irreversible. ¿Desea continuar?',
                      showCancelButton: true,
                      cancelButtonText: 'Cancelar',
                      showConfirmButton: true,
                      confirmButtonText: 'Continuar'}" (confirm)="deleteRol(rol.id)">
  
                    <fa-icon [icon]="faTrash"></fa-icon> Eliminar
                  </button>
                </td>
  
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>